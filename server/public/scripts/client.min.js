var myApp=angular.module("myApp",["ngRoute","ngMaterial"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info",{templateUrl:"/views/templates/info.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/tovisit",{templateUrl:"views/templates/tovisit.html",controller:"ToVisitController",controllerAs:"tovisit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/visited",{templateUrl:"views/templates/visited.html",controller:"VisitedController",controllerAs:"visited",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/add",{templateUrl:"views/templates/add.html",controller:"AddController",controllerAs:"add",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/submit",{templateUrl:"views/templates/submit.html",controller:"SubmitController",controllerAs:"submit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/edit",{templateUrl:"views/templates/edit.html",controller:"EditController",controllerAs:"edit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/landing",{templateUrl:"views/templates/landing.html",controller:"LandingController",controllerAs:"landing",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("AddController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("AddController sourced!");var e=d.userObject;console.log(e),a.location={user:e.userName,name:"",dateAdded:new Date,dateVisited:"",address:"",website:"",recommender:"",recNotes:"",visited:!1,type:"",userNotes:""},a.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(a){return{abbrev:a}}),a.types="Restaurant Nightlife Shopping Coffee Beauty Education Pets Religious Arts Entertainment Health Hotels Travel".split(" ").map(function(a){return{type:a}}),a.addNewPlace=function(a){console.log("Adding New Place: ",a),b.post("/locations",a).then(function(a){console.log(a.data)})}}]),myApp.controller("LandingController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("LandingController Sourced!")}]),myApp.controller("SubmitController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("SubmitController sourced!");var e=d.userObject;console.log(e),a.location={user:e.userName,name:"",dateAdded:new Date,dateVisited:"",address:"",website:"",recommender:"",recNotes:"",visited:!0,type:"",userNotes:""},a.updatePlace=function(){placeID=d.placeID,console.log("Totes updating id: ",placeID.id)}}]),myApp.controller("ToVisitController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("ToVisitController sourced!"),a.userObject=d.userObject,a.logout=d.logout,a.getPlaces=d.getPlaces,a.locationList=d.locationList,a.getID=d.getID,a.expandPanel=function(){console.log("expandPanel clicked!")},a.getPlaces()}]),myApp.controller("VisitedController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("VisitedController sourced!"),a.userObject=d.userObject,a.logout=d.logout}]),myApp.controller("InfoController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("InfoController Sourced!"),a.logout=d.logout}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Enter your username and password!":(console.log("sending to server...",a.user),b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/user")):(console.log("failure: ",b),a.message="Wrong!!")}))},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":(console.log("sending to server...",a.user),b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again."}))}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){a.userObject=d.userObject,a.logout=d.logout}]),myApp.factory("UserService",["$http","$location",function(a,b){console.log("User Service Loaded");var c={},d={},e={id:""};return{userObject:c,locationList:d,placeID:e,getID:function(a){console.log("Got _id in factory: ",a),e.id=a,console.log("placeID is: ",e.id)},getPlaces:function(){console.log("get that place girl!"),a.get("/locations").then(function(a){d.data=a.data})},getuser:function(){a.get("/user").then(function(a){a.data.username?(c.userName=a.data.username,console.log("User Data: ",c.userName)):b.path("/home")})},updatePlace:function(b){console.log("Updating Place!",b),a.put("/locations").then(function(a){console.log(a)})},logout:function(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}}}]);