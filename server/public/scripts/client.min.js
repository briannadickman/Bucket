var myApp=angular.module("myApp",["ngRoute","ngMaterial"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info",{templateUrl:"/views/templates/info.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/tovisit",{templateUrl:"views/templates/tovisit.html",controller:"ToVisitController",controllerAs:"tovisit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/visited",{templateUrl:"views/templates/visited.html",controller:"VisitedController",controllerAs:"visited",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/add",{templateUrl:"views/templates/add.html",controller:"AddController",controllerAs:"add",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/submit",{templateUrl:"views/templates/submit.html",controller:"SubmitController",controllerAs:"submit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/edit",{templateUrl:"views/templates/edit.html",controller:"EditController",controllerAs:"edit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/landing",{templateUrl:"views/templates/landing.html",controller:"LandingController",controllerAs:"landing",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("AddController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("AddController sourced!");var e=d.userObject;console.log(e),a.location=d.locationObject,a.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(a){return{abbrev:a}}),a.types="Restaurant Nightlife Shopping Coffee Beauty Education Pets Religious Arts Entertainment Health Hotels Travel".split(" ").map(function(a){return{type:a}}),a.addNewPlace=function(c){a.location.dateVisited=new Date,a.location.visited=!1,a.location.user=e.userName,console.log("Adding New Place: ",c),b.post("/locations",c).then(function(a){console.log(a.data)})}}]),myApp.controller("EditController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("EditController sourced!")}]),myApp.controller("LandingController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("LandingController Sourced!")}]),myApp.controller("SubmitController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("SubmitController sourced!");var e=d.userObject;console.log(e),a.location=d.locationObject,a.location={user:e.userName,name:"Test Name",dateAdded:d.locationObject.dateAdded,dateVisited:new Date,address:d.locationObject.address,website:d.locationObject.website,recommender:d.locationObject.recommender,recNotes:d.locationObject.recNotes,visited:d.locationObject.visited,type:d.locationObject.type,userNotes:""},a.visitPlace=d.visitPlace}]),myApp.controller("ToVisitController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("ToVisitController sourced!"),a.userObject=d.userObject,a.logout=d.logout,a.getPlaces=d.getPlaces,a.locationList=d.locationList,a.getThisPlace=d.getThisPlace,a.expandPanel=function(){console.log("expandPanel clicked!")};var f;a.openMenu=function(a,b){f=b,a.open(b)},a.editPlace=function(){console.log("Edit Place clicked!")},a.deletePlace=d.deletePlace,console.log(d.locationList),a.getPlaces()}]),myApp.controller("VisitedController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("VisitedController sourced!"),a.userObject=d.userObject,a.logout=d.logout,a.getPlaces=d.getPlaces,a.locationList=d.locationList,a.getThisPlace=d.getThisPlace,a.expandPanel=function(){console.log("expandPanel clicked!")};var f;a.openMenu=function(a,b){f=b,a.open(b)},a.editPlace=function(){console.log("Edit Place clicked!")},a.deletePlace=function(){console.log("Delete Place clicked!")},a.getPlaces()}]),myApp.controller("InfoController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("InfoController Sourced!"),a.logout=d.logout}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Enter your username and password!":(console.log("sending to server...",a.user),b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/user"),c.path("/tovisit")):(console.log("failure: ",b),a.message="Wrong!!")}))},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again."})}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){a.userObject=d.userObject,a.logout=d.logout}]),myApp.factory("UserService",["$http","$location",function(a,b){function c(a){console.log("Got object in factory: ",a),f.place=a,console.log("placeObject is: ",f.place)}console.log("User Service Loaded");var d={},e={},f={place:""};return{userObject:d,locationList:e,locationObject:{user:"",name:"",dateAdded:"",dateVisited:"",address:"",website:"",recommender:"",recNotes:"",visited:"",type:"",userNotes:""},getThisPlace:c,deletePlace:function(b){c(b),console.log("Deleting place: ",b),a.delete("/locations",b).then(function(a){console.log("This is the response: ",a)})},getPlaces:function(){console.log("get that place girl!"),a.get("/locations").then(function(a){e.data=a.data})},getuser:function(){a.get("/user").then(function(a){a.data.username?(d.userName=a.data.username,console.log("User Data: ",d.userName)):b.path("/home")})},visitPlace:function(){console.log("Updating Place!",f),a.put("/locations",f).then(function(a){console.log("This is the response: ",a)})},logout:function(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}}}]);