var myApp=angular.module("myApp",["ngRoute","ngMaterial","xeditable"]);myApp.config(["$routeProvider","$locationProvider","$mdThemingProvider",function(a,b,c){c.theme("default").primaryPalette("bucketpalette",{default:"500","hue-1":"A100","hue-2":"300","hue-3":"800"}),c.definePalette("bucketpalette",{50:"fef6ed",100:"fce8d3",200:"fbd9b5",300:"535353",400:"f7be81",500:"171729",600:"f5ab63",700:"f3a258",800:"FFCC30",900:"f9cb9c",A100:"F4F4F4",A200:"a4a4a4",A400:"dadada",A700:"ffd8bc",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],contrastLightColors:["500","A100","800"]}),b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"UserController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info",{templateUrl:"/views/templates/info.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/tovisit",{templateUrl:"views/templates/tovisit.html",controller:"ToVisitController",controllerAs:"tovisit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/visited",{templateUrl:"views/templates/visited.html",controller:"VisitedController",controllerAs:"visited",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/add",{templateUrl:"views/templates/add.html",controller:"AddController",controllerAs:"add",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/submit",{templateUrl:"views/templates/submit.html",controller:"SubmitController",controllerAs:"submit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/edit",{templateUrl:"views/templates/edit.html",controller:"EditController",controllerAs:"edit",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/landing",{templateUrl:"views/templates/landing.html",controller:"LandingController",controllerAs:"landing"}).when("/places",{templateUrl:"views/templates/places.html",controller:"PlacesController",controllerAs:"places",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"landing"})}]),myApp.controller("AddController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("AddController sourced!");var e=d.userObject;a.location=d.locationObject,a.location.dateAdded=new Date,a.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(a){return{abbrev:a}}),a.types="Restaurant Nightlife Shopping Coffee Beauty Education Pets Religious Arts Entertainment Health Hotels Travel".split(" ").map(function(a){return{type:a}}),a.addNewPlace=function(c){a.location.visited=!1,a.location.user=e.userName,console.log("Adding New Place: ",c),console.log("Adding New PlaceObject: ",d.locationObject),b.post("/locations",c).then(function(a){console.log(a.data)})}}]),myApp.controller("EditController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("EditController sourced!");d.userObject;a.location=d.locationObject,a.placeObject=d.placeObject,a.updatePlace=d.updatePlace,a.location.name=d.placeObject.place.name,a.location.dateAdded=d.placeObject.place.dateAdded,a.location.dateVisited=d.placeObject.place.dateVisited,a.location.address=d.placeObject.place.address,a.location.city=d.placeObject.place.city,a.location.state=d.placeObject.place.state,a.location.zipcode=d.placeObject.place.zipcode,a.location.website=d.placeObject.place.website,a.location.recommender=d.placeObject.place.recommender,a.location.recNotes=d.placeObject.place.recNotes,a.location.visited=d.placeObject.place.visited,a.location.type=d.placeObject.place.type,a.location.userNotes=d.placeObject.place.userNotes,a.states="AL AK AZ AR CA CO CT DE FL GA HI ID IL IN IA KS KY LA ME MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND OH OK OR PA RI SC SD TN TX UT VT VA WA WV WI WY".split(" ").map(function(a){return{abbrev:a}}),a.types="Restaurant Nightlife Shopping Coffee Beauty Education Pets Religious Arts Entertainment Health Hotels Travel".split(" ").map(function(a){return{type:a}}),a.editPlace=function(a,b){console.log(b),a.place.name=b.name,a.place.dateAdded=b.dateAdded,a.place.dateVisited=b.dateVisited,a.place.address=b.address,a.place.city=b.city,a.place.state=b.state,a.place.zipcode=b.zipcode,a.place.website=b.website,a.place.recommender=b.recommender,a.place.recNotes=b.recNotes,a.place.visited=b.visited,a.place.type=b.type,a.place.userNotes=b.userNotes,console.log("REVISED place object is: ",a),d.updatePlace(a)}}]),myApp.controller("HeaderController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("HeaderController sourced!"),a.logout=d.logout,a.goHome=function(){console.log("Going Home")};var f;a.openMenu=function(a,b){f=b,a.open(b)},a.header=function(){console.log("logging out"),a.logout()}}]),myApp.controller("LandingController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("LandingController Sourced!")}]),myApp.controller("PlacesController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("PlacesController sourced!")}]),myApp.controller("SubmitController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("SubmitController sourced!");d.userObject;a.location=d.locationObject,a.placeObject=d.placeObject,a.updatePlace=d.updatePlace,a.location.dateVisited=new Date,a.submitPlace=function(a,b){a.place.userNotes=b.userNotes,console.log("REVISED place object is: ",a),d.submitAndUpdatePlace(a)}}]),myApp.controller("ToVisitController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("ToVisitController sourced!"),a.userObject=d.userObject,a.logout=d.logout,a.getPlaces=d.getPlaces,a.locationList=d.locationList,a.getThisPlace=d.getThisPlace,a.expandPanel=function(){console.log("expandPanel clicked!")};var f;a.openMenu=function(a,b){f=b,a.open(b)},a.editPlace=function(){console.log("Edit Place clicked!")},a.deletePlace=d.deletePlace,a.types="Restaurant Nightlife Shopping Coffee Beauty Education Pets Religious Arts Entertainment Health Hotels Travel".split(" ").map(function(a){return{type:a}}),a.getPlaces()}]),myApp.controller("VisitedController",["$scope","$http","$location","UserService",function(a,b,c,d,e){console.log("VisitedController sourced!"),a.userObject=d.userObject,a.logout=d.logout,a.getPlaces=d.getPlaces,a.locationList=d.locationList,a.getThisPlace=d.getThisPlace,a.expandPanel=function(){console.log("expandPanel clicked!")};var f;a.openMenu=function(a,b){f=b,a.open(b)},a.editPlace=function(){console.log("Edit Place clicked!")},a.deletePlace=function(){console.log("Delete Place clicked!")},a.getPlaces()}]),myApp.controller("InfoController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("InfoController Sourced!"),a.logout=d.logout}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Enter your username and password!":b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/user"),c.path("/tovisit")):(console.log("failure: ",b),a.message="Wrong!!")})},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again."})}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){a.userObject=d.userObject,a.logout=d.logout}]),myApp.factory("UserService",["$http","$location",function(a,b){function c(){a.get("/locations").then(function(a){f.data=a.data})}function d(a){console.log("getting this place: ",a),g.place=a}console.log("User Service Loaded");var e={},f={},g={place:""};return{userObject:e,locationList:f,locationObject:{user:"",name:"",dateAdded:"",dateVisited:"",address:"",city:"",state:"",zipcode:"",website:"",recommender:"",recNotes:"",visited:"",type:"",userNotes:""},placeObject:g,getThisPlace:d,getPlaces:c,deletePlace:function(b){d(b),console.log("Deleting place: ",b),a.delete("/locations/"+b._id).then(function(a){console.log(a)}),c()},getuser:function(){a.get("/user").then(function(a){a.data.username?e.userName=a.data.username:b.path("/home")})},submitAndUpdatePlace:function(b){console.log("Updating Place!",g),a.put("/locations/submit",g).then(function(a){console.log(a)})},updatePlace:function(b){console.log("Updating Place!",g),a.put("/locations/update",g).then(function(a){console.log(a)})},logout:function(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}}}]);